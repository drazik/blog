{"filename":"index.md","title":"J'ai eu besoin d'un accès distant à mon serveur MySQL","date":"2014-03-16","timeSensitive":true,"body":{"t":"div","c":[{"t":"p","c":["Pour un projet universitaire (une plateforme collaborative de développement R),\nj’ai eu besoin d’une base de données. J’ai pas cherché midi à quatorze heures,\nj’ai choisi MySQL. Mais quelle fût ma surprise lorsque j'ai constaté que je ne\npouvais pas m'y connecter à partir de ma machine mais uniquement à partir de\ncelle sur laquelle MySQL tournait."]},"\n",{"t":"p","c":[{"t":"span","p":{"className":"more"}}]},"\n",{"t":"p","c":["Bon d'abord, on va commencer par installer MySQL :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--shell"},"c":[{"t":"span","c":["apt-get mysql-server"]}]}]}]},"\n",{"t":"p","c":["Il nous demande le mot de passe root. Nous voilà avec un MySQL et un\nutilisateur root."]},"\n",{"t":"p","c":["Maintenant j’aimerais utiliser HeidiSQL pour gérer mes bases. Allez soyons\nfous, on entre l’ip de notre serveur, root et notre mot de passe dans HeidiSQL.\nEt là… Oh la grosse erreur ! Eh ouais, MySQL n’autorise que les connexions\nlocales par défaut. Et ne donne des droits aux utilisateur que s’ils se\nconnectent en local. Bon, on va changer tout ça."]},"\n",{"t":"p","c":["On va d’abord donner tous les droits sur toutes les bases à notre utilisateur\nroot (en vrai il faudrait ne surtout pas toucher à root, mais plutôt créer un\nautre utilisateur à qui on restreint les droits, etc… J’ai la flemme, on verra\nplus tard) :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--sql"},"c":[{"t":"span","p":{"className":"syntax--keyword syntax--other syntax--authorization syntax--sql"},"c":[{"t":"span","c":["GRANT"]}]},{"t":"span","c":[" ALL PRIVILEGES "]},{"t":"span","p":{"className":"syntax--keyword syntax--other syntax--DDL syntax--create syntax--II syntax--sql"},"c":[{"t":"span","c":["ON"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--star syntax--sql"},"c":[{"t":"span","c":["*"]}]},{"t":"span","c":["."]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--star syntax--sql"},"c":[{"t":"span","c":["*"]}]},{"t":"span","c":[" TO ‘root’@’%’ IDENTIFIED BY ‘UnMDPSuperSecret’;"]}]}]}]},"\n",{"t":"p","c":["EDIT : un ",{"t":"a","p":{"href":"http://blog.emmanuelgautier.fr/utilisateurs-et-privileges-sous-mysql.html"},"c":["très bon\narticle"]},"\nd'Emmanuel Gautier explique comment gérer les droits sous MySQL. Je vous invite\nà y jetter un oeil pour gérer les droits proprement sur votre serveur."]},"\n",{"t":"p","c":["Explications. ",{"t":"code","c":["GRANT ALL PRIVILEGES"]},", ça veut dire ce que ça veut dire. ",{"t":"code","c":["ON *.*"]},", ça veut dire sur toutes les bases et toutes les tables qui composent ces\nbases. ",{"t":"code","c":["TO 'root'@'%'"]},", ça veut dire à l’utilisateur root peu importe l’IP avec\nlaquelle il se connecte. Et ",{"t":"code","c":["IDENTIFIED BY '...'"]},", c’est le mot de passe de\nroot."]},"\n",{"t":"p","c":["Pour que MySQL prenne ceci en compte, il faut “flusher” les privileges :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--sql"},"c":[{"t":"span","c":["FLUSH PRIVILEGES;"]}]}]}]},"\n",{"t":"p","c":["Une fois ceci fait, on va dire à MySQL de ne plus écouter les connexions\nuniquement sur 127.0.0.1 :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--shell"},"c":[{"t":"span","c":["vi /etc/mysql/my.cnf"]}]}]}]},"\n",{"t":"p","c":["On commente la ligne ",{"t":"code","c":["bind-address = 127.0.0.1"]},"."]},"\n",{"t":"p","c":["Et on redémarre MySQL :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--shell"},"c":[{"t":"span","c":["/etc/init.d/mysql restart"]}]}]}]},"\n",{"t":"p","c":["Et voilà, comme dirait l’autre."]}]}}