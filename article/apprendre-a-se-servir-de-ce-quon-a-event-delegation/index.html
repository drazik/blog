<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/phenomic/phenomic.main.4c397c62.css"/></head><body><div id="PhenomicRoot"><div data-reactroot=""><header class="header"><div class="content-wrap"><div class="logo"><h1><a href="/">Jesmo Drazik Blog</a></h1><p class="description">Développeur front-end @ Cozy Cloud</p><div class="find-me"><a href="https://twitter.com/JesmoDrazik">Twitter</a><a href="https://github.com/drazik">GitHub</a></div></div></div></header><div id="content"><div class="content-wrap"><div><article class="article"><h1 style="text-align:center">Apprendre à se servir de ce qu&#x27;on a : la délégation d&#x27;événements</h1><p><strong>Attention, cet article a été publié il y a plus d&#x27;un an. Son contenu ne doit plus être prit pour argent comptant. Vous devriez recouper les informations qu&#x27;il contient avec d&#x27;autres sources, afin de vous assurer que celles-ci sont toujours d&#x27;actualité.</strong></p><div><p>La délégation d&#x27;événements est un concept très fréquemment utilisé et
extrêmement utile. Plutôt que d&#x27;attacher un événement à chaque élément enfant
d&#x27;un autre élément, pourquoi ne pas en attacher un uniquement à l&#x27;élément
parent, et se servir de la phase de bubbling pour identifier l&#x27;élément qui a
déclenché l&#x27;événement ? jQuery et ses petits copains gèrent ça très bien (le
fameux 2ème paramètre de <code>jQuery.on</code>). Voyons comment faire la même chose en se
passant de leurs services.</p>
<p><span class="more"></span></p>
<p><em>Cet article est le cinquième de la série <a href="/articles/apprendre-a-se-servir-de-ce-quon-a">&quot;apprendre à se servir de ce qu&#x27;on
a&quot;</a>, ayant pour objectif de
montrer que l&#x27;utilisation d&#x27;une bibliothèque telle que jQuery n&#x27;a pas toujours
de sens. N&#x27;hésitez pas à parcourir les autres articles !</em></p>
<h2 id="pourquoi-faire-ça-"><a aria-hidden="true" href="#pourquoi-faire-ça-"><span class="icon icon-link"></span></a>Pourquoi faire ça ?</h2>
<p>Tout d&#x27;abord, cette technique améliore les performances. Au lieu d&#x27;attacher 100
événements à mes 100 <code>&lt;li&gt;</code> qui composent mon <code>&lt;ul&gt;</code>, je n&#x27;en attache qu&#x27;un
seul sur le <code>&lt;ul&gt;</code>. Mais un autre avantage non négligeable est qu&#x27;elle permet
de ne pas se soucier de l&#x27;ajout ni de la suppression d&#x27;éléments au sein de
l&#x27;élément auquel l&#x27;événement est attaché. En effet, en attachant un événément à
chaque <code>&lt;li&gt;</code>, il faudrait, lorsque j&#x27;en supprime un, d&#x27;abord supprimer
l&#x27;événement qui lui est attaché. De même si j&#x27;ajoute un <code>&lt;li&gt;</code>, il faudrait que
je m&#x27;occupe de lui attacher un événement, puisque celui-ci ne peut pas deviner
qu&#x27;il doit réagir comme les autres à l&#x27;événement <code>click</code>, par exemple. Or en
attachant un événement uniquement au <code>&lt;ul&gt;</code>, celui-ci recevra l&#x27;événement click
en provenance des <code>&lt;li&gt;</code>. Bien évidemment, ce n&#x27;est pas magique. Si la fonction
de callback attachée au <code>&lt;ul&gt;</code> se déclenche uniquement lorsqu&#x27;on intéragit avec
un <code>&lt;li&gt;</code>, c&#x27;est parce qu&#x27;on lui a dit. Ceci est possible grâce à la phase de
bubbling que traverse un événement, et qui est très bien expliquée chez
<a href="http://www.alsacreations.com/article/lire/578-La-gestion-des-evenements-en-JavaScript.html">Alsacréations</a>.</p>
<p>Voyons voir comment faire ceci avec nos petites main.</p>
<h2 id="la-délégation-dévénement-sans-bibliothèque-aucune-"><a aria-hidden="true" href="#la-délégation-dévénement-sans-bibliothèque-aucune-"><span class="icon icon-link"></span></a>La délégation d&#x27;événement sans bibliothèque aucune !</h2>
<p>Alors, qu&#x27;est-ce qu&#x27;il nous faut ? D&#x27;abord un DOM, évidemment, et un event
listener. On va changer d&#x27;exemple et créer une <code>&lt;div&gt;</code> contenant des
<code>&lt;button&gt;</code>. Lorsqu&#x27;on cliquera sur un <code>&lt;button&gt;</code>, on affichera le texte qu&#x27;il
contient.</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--html syntax--basic"><span class="syntax--meta syntax--tag syntax--block syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;</span></span><span class="syntax--entity syntax--name syntax--tag syntax--block syntax--any syntax--html"><span>div</span></span><span> </span><span class="syntax--meta syntax--attribute-with-value syntax--id syntax--html"><span class="syntax--entity syntax--other syntax--attribute-name syntax--id syntax--html"><span>id</span></span><span class="syntax--punctuation syntax--separator syntax--key-value syntax--html"><span>=</span></span><span class="syntax--string syntax--quoted syntax--double syntax--html"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"><span>&quot;</span></span><span class="syntax--meta syntax--toc-list syntax--id syntax--html"><span>container</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"><span>&quot;</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span></span></div><div class="line"><span class="syntax--text syntax--html syntax--basic"><span>    </span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span> </span><span class="syntax--entity syntax--other syntax--attribute-name syntax--html"><span>type</span></span><span>=</span><span class="syntax--string syntax--quoted syntax--double syntax--html"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"><span>&quot;</span></span><span>button</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span><span>Je suis le 1er bouton</span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;/</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span></span></div><div class="line"><span class="syntax--text syntax--html syntax--basic"><span>    </span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span> </span><span class="syntax--entity syntax--other syntax--attribute-name syntax--html"><span>type</span></span><span>=</span><span class="syntax--string syntax--quoted syntax--double syntax--html"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"><span>&quot;</span></span><span>button</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span><span>Je suis le 2eme bouton</span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;/</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span></span></div><div class="line"><span class="syntax--text syntax--html syntax--basic"><span>    </span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span> </span><span class="syntax--entity syntax--other syntax--attribute-name syntax--html"><span>type</span></span><span>=</span><span class="syntax--string syntax--quoted syntax--double syntax--html"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"><span>&quot;</span></span><span>button</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span><span>Je suis le 3eme bouton</span><span class="syntax--meta syntax--tag syntax--inline syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;/</span></span><span class="syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"><span>button</span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span></span></div><div class="line"><span class="syntax--text syntax--html syntax--basic"><span class="syntax--meta syntax--tag syntax--block syntax--any syntax--html"><span class="syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"><span>&lt;/</span></span><span class="syntax--entity syntax--name syntax--tag syntax--block syntax--any syntax--html"><span>div</span></span><span class="syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"><span>&gt;</span></span></span></span></div></pre>
<p>Il faut maintenant qu&#x27;on attache un événement <code>click</code> à notre <code>div#container</code>.
Celui-ci devra regarder si l&#x27;élément ayant déclenché l&#x27;événement est un
<code>&lt;button&gt;</code>, et si c&#x27;est le cas, afficher le texte contenu par celui-ci dans la
console. Pour IE 8, on utilisera un polyfill de
<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener?redirectlocale=en-US&amp;redirectslug=DOM%2FEventTarget.addEventListener"><code>EventTarget.addEventListener</code></a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--storage syntax--type syntax--var syntax--js"><span>var</span></span><span> container </span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>=</span></span><span> </span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>document</span></span><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--function syntax--dom syntax--js"><span>getElementById</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>container</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--punctuation syntax--terminator syntax--statement syntax--js"><span>;</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span> </span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--variable syntax--other syntax--object syntax--js"><span>container</span></span><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--function syntax--dom syntax--js"><span>addEventListener</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>click</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span><span> </span><span class="syntax--meta syntax--function syntax--js"><span class="syntax--storage syntax--type syntax--function syntax--js"><span>function</span></span><span class="syntax--meta syntax--parameters syntax--js"><span class="syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"><span>{</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>  </span><span class="syntax--keyword syntax--control syntax--js"><span>if</span></span><span> </span><span class="syntax--meta syntax--brace syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>target</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--js"><span>&amp;&amp;</span></span><span> </span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>target</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>nodeName</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--comparison syntax--js"><span>===</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>BUTTON</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--brace syntax--round syntax--js"><span>)</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>    </span><span class="syntax--entity syntax--name syntax--type syntax--object syntax--console syntax--js"><span>console</span></span><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--function syntax--console syntax--js"><span>log</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>target</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--variable syntax--other syntax--property syntax--js"><span>textContent</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--punctuation syntax--terminator syntax--statement syntax--js"><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>  </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"><span>}</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--punctuation syntax--terminator syntax--statement syntax--js"><span>;</span></span></span></div></pre>
<p>Cette façon de faire fonctionne. Mais est très spécifique et va vite devenir
trop complexe. On va donc décomposer son fonctionnement pour essayer de créer
une fonction générique. Notre fonction précédente regarde si <code>event.target</code> est
bien un <code>&lt;button&gt;</code>. Pour généraliser, il faudrait qu&#x27;on puisse savoir si
<code>event.target</code> correspond à un sélecteur CSS donné. Puis, si l&#x27;élément
correspond au sélecteur qui nous interresse, on exécute la fonction voulue.</p>
<p>On a donc besoin d&#x27;une fonction permettant de savoir si un élément correspond à
un sélecteur CSS ou non. Pour cela, il existe la méthode
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/matches"><code>Element.matches</code></a>.
Celle-ci est disponible sur tous les navigateurs récents, ainsi que sur IE 9+
(avec préfixe, en ateste <a href="http://caniuse.com/#feat=matchesselector">caniuse</a>).
Pour IE8, le MDN fournit un polyfill utilisant <code>document.querySelectorAll</code>.
Celui-ci ne sera donc utilisable qu&#x27;avec des <a href="http://www.w3.org/TR/CSS2/selector.html">sélecteurs CSS
2.1</a>, ce qui devrait être largement
suffisant pour une grande majorité des cas.</p>
<p>On a donc tout ce qu&#x27;il faut pour créer notre fonction <code>delegate</code> !</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> Notre fonction a besoin :</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> - de l&#x27;élément sur lequel écouter l&#x27;événement</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> - du type d&#x27;événement à écouter</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> - du sélecteur auquel les éléments doivent correspondre pour lancer le callback</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> - le callback à lancer</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--function syntax--js"><span class="syntax--storage syntax--type syntax--function syntax--js"><span>function</span></span><span> </span><span class="syntax--entity syntax--name syntax--function syntax--js"><span>delegate</span></span><span class="syntax--meta syntax--parameters syntax--js"><span class="syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--variable syntax--parameter syntax--function syntax--js"><span>element</span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span><span> </span><span class="syntax--variable syntax--parameter syntax--function syntax--js"><span>eventType</span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span><span> </span><span class="syntax--variable syntax--parameter syntax--function syntax--js"><span>selector</span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span><span> </span><span class="syntax--variable syntax--parameter syntax--function syntax--js"><span>callback</span></span><span class="syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"><span>{</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>  </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> on écoute l&#x27;événement sur l&#x27;élément parent</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>  </span><span class="syntax--variable syntax--other syntax--object syntax--js"><span>element</span></span><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--function syntax--dom syntax--js"><span>addEventListener</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span>eventType</span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span><span> </span><span class="syntax--meta syntax--function syntax--js"><span class="syntax--storage syntax--type syntax--function syntax--js"><span>function</span></span><span class="syntax--meta syntax--parameters syntax--js"><span class="syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"><span>{</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>    </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> si event.target correspond au sélecteur voulu...</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>    </span><span class="syntax--keyword syntax--control syntax--js"><span>if</span></span><span> </span><span class="syntax--meta syntax--brace syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>target</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--js"><span>&amp;&amp;</span></span><span> </span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--variable syntax--property syntax--dom syntax--js"><span>target</span></span><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"><span>.</span></span><span class="syntax--support syntax--function syntax--dom syntax--js"><span>matches</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span>selector</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--meta syntax--brace syntax--round syntax--js"><span>)</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>      </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> ... on exécute le callback</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>      </span><span class="syntax--meta syntax--function-call syntax--js"><span class="syntax--entity syntax--name syntax--function syntax--js"><span>callback</span></span><span class="syntax--meta syntax--arguments syntax--js"><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"><span>(</span></span><span class="syntax--support syntax--variable syntax--dom syntax--js"><span>event</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--punctuation syntax--terminator syntax--statement syntax--js"><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>    </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--method-call syntax--js"><span class="syntax--meta syntax--arguments syntax--js"><span>  </span><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"><span>}</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"><span>)</span></span></span></span><span class="syntax--punctuation syntax--terminator syntax--statement syntax--js"><span>;</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"><span>}</span></span></span></div></pre>
<p>C&#x27;est aussi simple que ça. Il n&#x27;y a plus qu&#x27;à mettre tout ça dans un petit
module Node.js et de le <code>require</code> pour ne pas polluer le scope global, et le
tour est joué.</p>
<p>Pour tester cette fonction, vous pouvez regarder le Codepen ci-dessous
(n&#x27;oubliez pas d&#x27;ouvrir votre console pour voir les <code>console.log</code>) :</p>
<p data-height="268" data-theme-id="15557" data-slug-hash="GJQVYO" data-default-tab="result" data-user="JesmoDrazik" class="codepen">See the Pen <a href="http://codepen.io/JesmoDrazik/pen/GJQVYO/">Event delegation</a> by Cyrille Perois (<a href="http://codepen.io/JesmoDrazik">@JesmoDrazik</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>
<h2 id="une-bibliothèque-spécialisée"><a aria-hidden="true" href="#une-bibliothèque-spécialisée"><span class="icon icon-link"></span></a>Une bibliothèque spécialisée</h2>
<p>Il existe tout de même des bibliothèques spécialisées dans la délégation
d&#x27;événements. Ma préférée est
<a href="https://github.com/ftlabs/ftdomdelegate/blob/master/lib/delegate.js">FTDomDelegate</a>.
Celle-ci couvre absolument tous les cas que vous pouvez rencontrer, et est
compatible jusqu&#x27;à IE 8, à condition d&#x27;utiliser un polyfill pour
<code>addEventListener</code>, ce qui était de toutes façons nécessaire pour notre
solution précédente. L&#x27;API de cette bibliothèque est simple et le tout
fonctionne très bien. De plus, elle est disponible sur npm. Que du bonheur.</p>
<p>Voilà, nous avons donc vu qu&#x27;une fonction de quelques lignes peut permettre de
faire de la délégation d&#x27;événement efficace et simple. Si vous préférez
utiliser une bibliothèque spécialisée, testée et éprouvée, alors je vous
conseille d&#x27;aller voir du côté de FTDomDelegate.</p></div><footer style="text-align:center"><a href="https://github.com/drazik/blog/edit/master/content/posts/apprendre-a-se-servir-de-ce-quon-a-event-delegation/index.md" target="_blank">Proposer des modifications</a></footer></article><div><a href="/">Revenir à l&#x27;accueil</a></div></div></div></div><footer><div class="content-wrap"><section class="copy"><p>© <!-- -->2018<!-- --> Cyrille Jesmo Drazik</p></section></div></footer></div></div><script id="PhenomicHydration" type="text/json">{"path=content%2Fposts&id=apprendre-a-se-servir-de-ce-quon-a-event-delegation":{"status":"idle","node":{"filename":"index.md","title":"Apprendre à se servir de ce qu'on a : la délégation d'événements","headings":[{"level":2,"text":"Pourquoi faire ça ?","id":"pourquoi-faire-ça-"},{"level":2,"text":"La délégation d'événement sans bibliothèque aucune !","id":"la-délégation-dévénement-sans-bibliothèque-aucune-"},{"level":2,"text":"Une bibliothèque spécialisée","id":"une-bibliothèque-spécialisée"}],"date":"2015-07-04","timeSensitive":true,"body":{"t":"div","c":[{"t":"p","c":["La délégation d'événements est un concept très fréquemment utilisé et\nextrêmement utile. Plutôt que d'attacher un événement à chaque élément enfant\nd'un autre élément, pourquoi ne pas en attacher un uniquement à l'élément\nparent, et se servir de la phase de bubbling pour identifier l'élément qui a\ndéclenché l'événement ? jQuery et ses petits copains gèrent ça très bien (le\nfameux 2ème paramètre de ",{"t":"code","c":["jQuery.on"]},"). Voyons comment faire la même chose en se\npassant de leurs services."]},"\n",{"t":"p","c":[{"t":"span","p":{"className":"more"}}]},"\n",{"t":"p","c":[{"t":"em","c":["Cet article est le cinquième de la série ",{"t":"a","p":{"href":"/articles/apprendre-a-se-servir-de-ce-quon-a"},"c":["\"apprendre à se servir de ce qu'on\na\""]},", ayant pour objectif de\nmontrer que l'utilisation d'une bibliothèque telle que jQuery n'a pas toujours\nde sens. N'hésitez pas à parcourir les autres articles !"]}]},"\n",{"t":"h2","p":{"id":"pourquoi-faire-ça-"},"c":[{"t":"a","p":{"aria-hidden":true,"href":"#pourquoi-faire-ça-"},"c":[{"t":"span","p":{"className":"icon icon-link"}}]},"Pourquoi faire ça ?"]},"\n",{"t":"p","c":["Tout d'abord, cette technique améliore les performances. Au lieu d'attacher 100\névénements à mes 100 ",{"t":"code","c":["<li>"]}," qui composent mon ",{"t":"code","c":["<ul>"]},", je n'en attache qu'un\nseul sur le ",{"t":"code","c":["<ul>"]},". Mais un autre avantage non négligeable est qu'elle permet\nde ne pas se soucier de l'ajout ni de la suppression d'éléments au sein de\nl'élément auquel l'événement est attaché. En effet, en attachant un événément à\nchaque ",{"t":"code","c":["<li>"]},", il faudrait, lorsque j'en supprime un, d'abord supprimer\nl'événement qui lui est attaché. De même si j'ajoute un ",{"t":"code","c":["<li>"]},", il faudrait que\nje m'occupe de lui attacher un événement, puisque celui-ci ne peut pas deviner\nqu'il doit réagir comme les autres à l'événement ",{"t":"code","c":["click"]},", par exemple. Or en\nattachant un événement uniquement au ",{"t":"code","c":["<ul>"]},", celui-ci recevra l'événement click\nen provenance des ",{"t":"code","c":["<li>"]},". Bien évidemment, ce n'est pas magique. Si la fonction\nde callback attachée au ",{"t":"code","c":["<ul>"]}," se déclenche uniquement lorsqu'on intéragit avec\nun ",{"t":"code","c":["<li>"]},", c'est parce qu'on lui a dit. Ceci est possible grâce à la phase de\nbubbling que traverse un événement, et qui est très bien expliquée chez\n",{"t":"a","p":{"href":"http://www.alsacreations.com/article/lire/578-La-gestion-des-evenements-en-JavaScript.html"},"c":["Alsacréations"]},"."]},"\n",{"t":"p","c":["Voyons voir comment faire ceci avec nos petites main."]},"\n",{"t":"h2","p":{"id":"la-délégation-dévénement-sans-bibliothèque-aucune-"},"c":[{"t":"a","p":{"aria-hidden":true,"href":"#la-délégation-dévénement-sans-bibliothèque-aucune-"},"c":[{"t":"span","p":{"className":"icon icon-link"}}]},"La délégation d'événement sans bibliothèque aucune !"]},"\n",{"t":"p","c":["Alors, qu'est-ce qu'il nous faut ? D'abord un DOM, évidemment, et un event\nlistener. On va changer d'exemple et créer une ",{"t":"code","c":["<div>"]}," contenant des\n",{"t":"code","c":["<button>"]},". Lorsqu'on cliquera sur un ",{"t":"code","c":["<button>"]},", on affichera le texte qu'il\ncontient."]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--basic"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--block syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["<"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--block syntax--any syntax--html"},"c":[{"t":"span","c":["div"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--attribute-with-value syntax--id syntax--html"},"c":[{"t":"span","p":{"className":"syntax--entity syntax--other syntax--attribute-name syntax--id syntax--html"},"c":[{"t":"span","c":["id"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--separator syntax--key-value syntax--html"},"c":[{"t":"span","c":["="]}]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"},"c":[{"t":"span","c":["\""]}]},{"t":"span","p":{"className":"syntax--meta syntax--toc-list syntax--id syntax--html"},"c":[{"t":"span","c":["container"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"},"c":[{"t":"span","c":["\""]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--basic"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["<"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--entity syntax--other syntax--attribute-name syntax--html"},"c":[{"t":"span","c":["type"]}]},{"t":"span","c":["="]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["button"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]},{"t":"span","c":["Je suis le 1er bouton"]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["</"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--basic"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["<"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--entity syntax--other syntax--attribute-name syntax--html"},"c":[{"t":"span","c":["type"]}]},{"t":"span","c":["="]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["button"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]},{"t":"span","c":["Je suis le 2eme bouton"]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["</"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--basic"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["<"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--entity syntax--other syntax--attribute-name syntax--html"},"c":[{"t":"span","c":["type"]}]},{"t":"span","c":["="]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--html"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["button"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--html"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]},{"t":"span","c":["Je suis le 3eme bouton"]},{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["</"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--inline syntax--any syntax--html"},"c":[{"t":"span","c":["button"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--basic"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--tag syntax--block syntax--any syntax--html"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--begin syntax--html"},"c":[{"t":"span","c":["</"]}]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--tag syntax--block syntax--any syntax--html"},"c":[{"t":"span","c":["div"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--tag syntax--end syntax--html"},"c":[{"t":"span","c":[">"]}]}]}]}]}]},"\n",{"t":"p","c":["Il faut maintenant qu'on attache un événement ",{"t":"code","c":["click"]}," à notre ",{"t":"code","c":["div#container"]},".\nCelui-ci devra regarder si l'élément ayant déclenché l'événement est un\n",{"t":"code","c":["<button>"]},", et si c'est le cas, afficher le texte contenu par celui-ci dans la\nconsole. Pour IE 8, on utilisera un polyfill de\n",{"t":"a","p":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener?redirectlocale=en-US&redirectslug=DOM%2FEventTarget.addEventListener"},"c":[{"t":"code","c":["EventTarget.addEventListener"]}]},"."]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--storage syntax--type syntax--var syntax--js"},"c":[{"t":"span","c":["var"]}]},{"t":"span","c":[" container "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":["="]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["document"]}]},{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--function syntax--dom syntax--js"},"c":[{"t":"span","c":["getElementById"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["container"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--terminator syntax--statement syntax--js"},"c":[{"t":"span","c":[";"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--variable syntax--other syntax--object syntax--js"},"c":[{"t":"span","c":["container"]}]},{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--function syntax--dom syntax--js"},"c":[{"t":"span","c":["addEventListener"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["click"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--function syntax--js"},"c":[{"t":"span","p":{"className":"syntax--storage syntax--type syntax--function syntax--js"},"c":[{"t":"span","c":["function"]}]},{"t":"span","p":{"className":"syntax--meta syntax--parameters syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["  "]},{"t":"span","p":{"className":"syntax--keyword syntax--control syntax--js"},"c":[{"t":"span","c":["if"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["target"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--logical syntax--js"},"c":[{"t":"span","c":["&&"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["target"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["nodeName"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--comparison syntax--js"},"c":[{"t":"span","c":["==="]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["BUTTON"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--type syntax--object syntax--console syntax--js"},"c":[{"t":"span","c":["console"]}]},{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--function syntax--console syntax--js"},"c":[{"t":"span","c":["log"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["target"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--variable syntax--other syntax--property syntax--js"},"c":[{"t":"span","c":["textContent"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--terminator syntax--statement syntax--js"},"c":[{"t":"span","c":[";"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["  "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--terminator syntax--statement syntax--js"},"c":[{"t":"span","c":[";"]}]}]}]}]},"\n",{"t":"p","c":["Cette façon de faire fonctionne. Mais est très spécifique et va vite devenir\ntrop complexe. On va donc décomposer son fonctionnement pour essayer de créer\nune fonction générique. Notre fonction précédente regarde si ",{"t":"code","c":["event.target"]}," est\nbien un ",{"t":"code","c":["<button>"]},". Pour généraliser, il faudrait qu'on puisse savoir si\n",{"t":"code","c":["event.target"]}," correspond à un sélecteur CSS donné. Puis, si l'élément\ncorrespond au sélecteur qui nous interresse, on exécute la fonction voulue."]},"\n",{"t":"p","c":["On a donc besoin d'une fonction permettant de savoir si un élément correspond à\nun sélecteur CSS ou non. Pour cela, il existe la méthode\n",{"t":"a","p":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Element/matches"},"c":[{"t":"code","c":["Element.matches"]}]},".\nCelle-ci est disponible sur tous les navigateurs récents, ainsi que sur IE 9+\n(avec préfixe, en ateste ",{"t":"a","p":{"href":"http://caniuse.com/#feat=matchesselector"},"c":["caniuse"]},").\nPour IE8, le MDN fournit un polyfill utilisant ",{"t":"code","c":["document.querySelectorAll"]},".\nCelui-ci ne sera donc utilisable qu'avec des ",{"t":"a","p":{"href":"http://www.w3.org/TR/CSS2/selector.html"},"c":["sélecteurs CSS\n2.1"]},", ce qui devrait être largement\nsuffisant pour une grande majorité des cas."]},"\n",{"t":"p","c":["On a donc tout ce qu'il faut pour créer notre fonction ",{"t":"code","c":["delegate"]}," !"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" Notre fonction a besoin :"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" - de l'élément sur lequel écouter l'événement"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" - du type d'événement à écouter"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" - du sélecteur auquel les éléments doivent correspondre pour lancer le callback"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" - le callback à lancer"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--function syntax--js"},"c":[{"t":"span","p":{"className":"syntax--storage syntax--type syntax--function syntax--js"},"c":[{"t":"span","c":["function"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--entity syntax--name syntax--function syntax--js"},"c":[{"t":"span","c":["delegate"]}]},{"t":"span","p":{"className":"syntax--meta syntax--parameters syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--variable syntax--parameter syntax--function syntax--js"},"c":[{"t":"span","c":["element"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--variable syntax--parameter syntax--function syntax--js"},"c":[{"t":"span","c":["eventType"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--variable syntax--parameter syntax--function syntax--js"},"c":[{"t":"span","c":["selector"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--variable syntax--parameter syntax--function syntax--js"},"c":[{"t":"span","c":["callback"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["  "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" on écoute l'événement sur l'élément parent"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["  "]},{"t":"span","p":{"className":"syntax--variable syntax--other syntax--object syntax--js"},"c":[{"t":"span","c":["element"]}]},{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--function syntax--dom syntax--js"},"c":[{"t":"span","c":["addEventListener"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","c":["eventType"]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--function syntax--js"},"c":[{"t":"span","p":{"className":"syntax--storage syntax--type syntax--function syntax--js"},"c":[{"t":"span","c":["function"]}]},{"t":"span","p":{"className":"syntax--meta syntax--parameters syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--begin syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" si event.target correspond au sélecteur voulu..."]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--keyword syntax--control syntax--js"},"c":[{"t":"span","c":["if"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["target"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--logical syntax--js"},"c":[{"t":"span","c":["&&"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--property syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--property syntax--dom syntax--js"},"c":[{"t":"span","c":["target"]}]},{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--method syntax--period syntax--js"},"c":[{"t":"span","c":["."]}]},{"t":"span","p":{"className":"syntax--support syntax--function syntax--dom syntax--js"},"c":[{"t":"span","c":["matches"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","c":["selector"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["      "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" ... on exécute le callback"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["      "]},{"t":"span","p":{"className":"syntax--meta syntax--function-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--entity syntax--name syntax--function syntax--js"},"c":[{"t":"span","c":["callback"]}]},{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":["("]}]},{"t":"span","p":{"className":"syntax--support syntax--variable syntax--dom syntax--js"},"c":[{"t":"span","c":["event"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--terminator syntax--statement syntax--js"},"c":[{"t":"span","c":[";"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--method-call syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--arguments syntax--js"},"c":[{"t":"span","c":["  "]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--bracket syntax--round syntax--js"},"c":[{"t":"span","c":[")"]}]}]}]},{"t":"span","p":{"className":"syntax--punctuation syntax--terminator syntax--statement syntax--js"},"c":[{"t":"span","c":[";"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--function syntax--body syntax--end syntax--bracket syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]},"\n",{"t":"p","c":["C'est aussi simple que ça. Il n'y a plus qu'à mettre tout ça dans un petit\nmodule Node.js et de le ",{"t":"code","c":["require"]}," pour ne pas polluer le scope global, et le\ntour est joué."]},"\n",{"t":"p","c":["Pour tester cette fonction, vous pouvez regarder le Codepen ci-dessous\n(n'oubliez pas d'ouvrir votre console pour voir les ",{"t":"code","c":["console.log"]},") :"]},"\n",{"t":"p","p":{"data-height":"268","data-theme-id":"15557","data-slug-hash":"GJQVYO","data-default-tab":"result","data-user":"JesmoDrazik","className":"codepen"},"c":["See the Pen ",{"t":"a","p":{"href":"http://codepen.io/JesmoDrazik/pen/GJQVYO/"},"c":["Event delegation"]}," by Cyrille Perois (",{"t":"a","p":{"href":"http://codepen.io/JesmoDrazik"},"c":["@JesmoDrazik"]},") on ",{"t":"a","p":{"href":"http://codepen.io"},"c":["CodePen"]},"."]},"\n",{"t":"script","p":{"async":true,"src":"//assets.codepen.io/assets/embed/ei.js"}},"\n",{"t":"h2","p":{"id":"une-bibliothèque-spécialisée"},"c":[{"t":"a","p":{"aria-hidden":true,"href":"#une-bibliothèque-spécialisée"},"c":[{"t":"span","p":{"className":"icon icon-link"}}]},"Une bibliothèque spécialisée"]},"\n",{"t":"p","c":["Il existe tout de même des bibliothèques spécialisées dans la délégation\nd'événements. Ma préférée est\n",{"t":"a","p":{"href":"https://github.com/ftlabs/ftdomdelegate/blob/master/lib/delegate.js"},"c":["FTDomDelegate"]},".\nCelle-ci couvre absolument tous les cas que vous pouvez rencontrer, et est\ncompatible jusqu'à IE 8, à condition d'utiliser un polyfill pour\n",{"t":"code","c":["addEventListener"]},", ce qui était de toutes façons nécessaire pour notre\nsolution précédente. L'API de cette bibliothèque est simple et le tout\nfonctionne très bien. De plus, elle est disponible sur npm. Que du bonheur."]},"\n",{"t":"p","c":["Voilà, nous avons donc vu qu'une fonction de quelques lignes peut permettre de\nfaire de la délégation d'événement efficace et simple. Si vous préférez\nutiliser une bibliothèque spécialisée, testée et éprouvée, alors je vous\nconseille d'aller voir du côté de FTDomDelegate."]}]}}}}</script><script src="/phenomic/phenomic.main.c0080dbe.js" async=""></script></body></html>