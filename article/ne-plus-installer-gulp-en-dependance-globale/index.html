<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/phenomic/phenomic.main.4c397c62.css"/></head><body><div id="PhenomicRoot"><div data-reactroot=""><header class="header"><div class="content-wrap"><div class="logo"><h1><a href="/">Jesmo Drazik Blog</a></h1><p class="description">Développeur front-end @ Cozy Cloud</p><div class="find-me"><a href="https://twitter.com/JesmoDrazik">Twitter</a><a href="https://github.com/drazik">GitHub</a></div></div></div></header><div id="content"><div class="content-wrap"><div><article class="article"><h1 style="text-align:center">Ne plus installer gulp en dépendance globale</h1><div><p>Avec l’arrivée de Gulp 4 (actuellement 3.8.x), qui apporte des nouveautés et
cassera potentiellement la compatibilité descendante (nouvelle version
majeure), je me suis penché sur le problème que pose le fait d’utiliser Gulp
via une installation locale (projet, gulpfile.js) + une installation globale
(système, commande gulp).</p>
<p><span class="more"></span></p>
<p>Si j’utilise Gulp 4 pour mes nouveaux projets pour profiter des nouveautés,
alors je devrais mettre à jour mon installation globale. Sauf que par
conséquent je risque de ne plus pouvoir l’utiliser sur mes projets anciens et
actuels car ceux-ci seront toujours en 3.8.x. Je pourrais mettre à jour le gulp
local à tous ces projets, mais ce serait galère. La meilleure solution serait
d’avoir tout le temps la version globale de gulp correspondant à la version
locale du projet sur lequel je bosse.</p>
<p>Il est très simple de régler ce problème sur les systèmes Linux / UNIX. Il
suffit de créer un alias sur <code>./node_modules/.bin/gulp</code>.</p>
<p>Du côté de Windows, il va falloir ruser. Mais ça tombe bien, quand on installe
localement un module qui a besoin d’une interface en ligne de commande, npm
crée un dossier <code>.bin</code> dans le dossier <code>node_modules</code> et il met les exécutables
correspondant dedans. On a donc accès à la commande <code>gulp</code> sans l’installer en
global.</p>
<p>Pour lancer la tâche watch d’un projet, on peut faire ceci :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>.\node_modules.bin\gulp watch</span></span></div></pre>
<p>On peut aussi aller “plus loin” et utiliser les scripts NPM. NPM permet de
définir des scripts qui peuvent être lancés en tapant :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm run nom_du_script</span></span></div></pre>
<p>Pour définir un script, il suffit d’ajouter un objet “scripts” dans le
package.json. On peut donc faire ceci :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>scripts</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>./node_modules/.bin/gulp</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></div></pre>
<p>Dans l’état c’est cool mais ça ne fait rien, il faudrait pouvoir lui passer la
tâche qu’on veut exécuter en argument, ou alors définir un script par tâche :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>scripts</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>./node_modules/.bin/gulp watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>./node_modules/.bin/gulp compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> autres tâches…</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></div></pre>
<p>On pourrait donc faire :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm run gulp:watch</span></span></div><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm run gulp:compile</span></span></div></pre>
<p>Mais le mieux serait de pouvoir utiliser le script <code>gulp</code> précédemment défini
et lui passer en paramètre le nom de la tâche qu’on veut exécuter. C’est
possible de faire ça, mais uniquement à partir de la version 2.0.0 de npm. Il
faut donc mettre à jour notre npm si on est en 1.x.y (<code>npm -v</code> pour vérifier) :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm install npm -g</span></span></div></pre>
<p>On peut maintenant faire ceci :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm run nom_du_script — arg1 arg2 &quot;arg avec des espaces&quot;</span></span></div></pre>
<p>Et du coup on peut lancer une tâche gulp en spécifiant son nom comme ceci :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>npm run gulp -- watch</span></span></div></pre>
<p>Et si on tient absolument à avoir un script pour chaque tâche, on peut
réutiliser le script “gulp” déjà écrit :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>scripts</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>./node_modules/.bin/gulp</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>npm run gulp — watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>npm run gulp — compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> autres tâches…</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></div></pre>
<p>Oh, wait ! Il y a encore plus fort. Quand on lance un script avec <code>npm run</code>,
npm prend le dossier <code>node_modules/.bin</code> et le met dans le PATH. On peut donc
faire encore plus court :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--js"><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>scripts</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>{</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp watch</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"><span>,</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp:compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--js"><span>:</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--js"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"><span>&quot;</span></span><span>gulp compile</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"><span>&quot;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span>    </span><span class="syntax--comment syntax--line syntax--double-slash syntax--js"><span class="syntax--punctuation syntax--definition syntax--comment syntax--js"><span>//</span></span><span> autres tâches…</span></span></span></div><div class="line"><span class="syntax--source syntax--js"><span class="syntax--meta syntax--brace syntax--curly syntax--js"><span>}</span></span></span></div></pre>
<p>Voilà, de cette manière, on évite d’avoir une installation globale de gulp (et
donc d’avoir à la maintenir à jour), et on a l’avantage de ne pas avoir à se
soucier de la version de gulp utilisée pour chacun des projets. Ceci est bien
entendu (théoriquement) valable pour toutes les dépendances globales.</p>
<p>Il est aussi interressant de voir qu&#x27;avec ce systèmes de scripts npm, l&#x27;interêt
des outils comme Gulp ou Grunt (pour ne citer qu&#x27;eux) devient limité. Des
articles traitent très bien de ces sujets. Vous pouvez par exemple aller voir
<a href="http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/">celui-ci</a> de
Keith Cirkel. Chacun se fera son propre avis !</p></div><footer style="text-align:center"><a href="https://github.com/drazik/blog/edit/master/content/posts/ne-plus-installer-gulp-en-dependance-globale/index.md" target="_blank">Proposer des modifications</a></footer></article><div><a href="/">Revenir à l&#x27;accueil</a></div></div></div></div><footer><div class="content-wrap"><section class="copy"><p>© <!-- -->2018<!-- --> Cyrille Jesmo Drazik</p></section></div></footer></div></div><script id="PhenomicHydration" type="text/json">{"path=content%2Fposts&id=ne-plus-installer-gulp-en-dependance-globale":{"status":"idle","node":{"filename":"index.md","title":"Ne plus installer gulp en dépendance globale","date":"2015-03-01","body":{"t":"div","c":[{"t":"p","c":["Avec l’arrivée de Gulp 4 (actuellement 3.8.x), qui apporte des nouveautés et\ncassera potentiellement la compatibilité descendante (nouvelle version\nmajeure), je me suis penché sur le problème que pose le fait d’utiliser Gulp\nvia une installation locale (projet, gulpfile.js) + une installation globale\n(système, commande gulp)."]},"\n",{"t":"p","c":[{"t":"span","p":{"className":"more"}}]},"\n",{"t":"p","c":["Si j’utilise Gulp 4 pour mes nouveaux projets pour profiter des nouveautés,\nalors je devrais mettre à jour mon installation globale. Sauf que par\nconséquent je risque de ne plus pouvoir l’utiliser sur mes projets anciens et\nactuels car ceux-ci seront toujours en 3.8.x. Je pourrais mettre à jour le gulp\nlocal à tous ces projets, mais ce serait galère. La meilleure solution serait\nd’avoir tout le temps la version globale de gulp correspondant à la version\nlocale du projet sur lequel je bosse."]},"\n",{"t":"p","c":["Il est très simple de régler ce problème sur les systèmes Linux / UNIX. Il\nsuffit de créer un alias sur ",{"t":"code","c":["./node_modules/.bin/gulp"]},"."]},"\n",{"t":"p","c":["Du côté de Windows, il va falloir ruser. Mais ça tombe bien, quand on installe\nlocalement un module qui a besoin d’une interface en ligne de commande, npm\ncrée un dossier ",{"t":"code","c":[".bin"]}," dans le dossier ",{"t":"code","c":["node_modules"]}," et il met les exécutables\ncorrespondant dedans. On a donc accès à la commande ",{"t":"code","c":["gulp"]}," sans l’installer en\nglobal."]},"\n",{"t":"p","c":["Pour lancer la tâche watch d’un projet, on peut faire ceci :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":[".\\node_modules.bin\\gulp watch"]}]}]}]},"\n",{"t":"p","c":["On peut aussi aller “plus loin” et utiliser les scripts NPM. NPM permet de\ndéfinir des scripts qui peuvent être lancés en tapant :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm run nom_du_script"]}]}]}]},"\n",{"t":"p","c":["Pour définir un script, il suffit d’ajouter un objet “scripts” dans le\npackage.json. On peut donc faire ceci :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["scripts"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["./node_modules/.bin/gulp"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]},"\n",{"t":"p","c":["Dans l’état c’est cool mais ça ne fait rien, il faudrait pouvoir lui passer la\ntâche qu’on veut exécuter en argument, ou alors définir un script par tâche :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["scripts"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["./node_modules/.bin/gulp watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["./node_modules/.bin/gulp compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" autres tâches…"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]},"\n",{"t":"p","c":["On pourrait donc faire :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm run gulp:watch"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm run gulp:compile"]}]}]}]},"\n",{"t":"p","c":["Mais le mieux serait de pouvoir utiliser le script ",{"t":"code","c":["gulp"]}," précédemment défini\net lui passer en paramètre le nom de la tâche qu’on veut exécuter. C’est\npossible de faire ça, mais uniquement à partir de la version 2.0.0 de npm. Il\nfaut donc mettre à jour notre npm si on est en 1.x.y (",{"t":"code","c":["npm -v"]}," pour vérifier) :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm install npm -g"]}]}]}]},"\n",{"t":"p","c":["On peut maintenant faire ceci :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm run nom_du_script — arg1 arg2 \"arg avec des espaces\""]}]}]}]},"\n",{"t":"p","c":["Et du coup on peut lancer une tâche gulp en spécifiant son nom comme ceci :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["npm run gulp -- watch"]}]}]}]},"\n",{"t":"p","c":["Et si on tient absolument à avoir un script pour chaque tâche, on peut\nréutiliser le script “gulp” déjà écrit :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["scripts"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["./node_modules/.bin/gulp"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["npm run gulp — watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["npm run gulp — compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" autres tâches…"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]},"\n",{"t":"p","c":["Oh, wait ! Il y a encore plus fort. Quand on lance un script avec ",{"t":"code","c":["npm run"]},",\nnpm prend le dossier ",{"t":"code","c":["node_modules/.bin"]}," et le met dans le PATH. On peut donc\nfaire encore plus court :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["scripts"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["{"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp watch"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--meta syntax--delimiter syntax--object syntax--comma syntax--js"},"c":[{"t":"span","c":[","]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp:compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--assignment syntax--js"},"c":[{"t":"span","c":[":"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--string syntax--quoted syntax--double syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--js"},"c":[{"t":"span","c":["\""]}]},{"t":"span","c":["gulp compile"]},{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--string syntax--end syntax--js"},"c":[{"t":"span","c":["\""]}]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","c":["    "]},{"t":"span","p":{"className":"syntax--comment syntax--line syntax--double-slash syntax--js"},"c":[{"t":"span","p":{"className":"syntax--punctuation syntax--definition syntax--comment syntax--js"},"c":[{"t":"span","c":["//"]}]},{"t":"span","c":[" autres tâches…"]}]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--js"},"c":[{"t":"span","p":{"className":"syntax--meta syntax--brace syntax--curly syntax--js"},"c":[{"t":"span","c":["}"]}]}]}]}]},"\n",{"t":"p","c":["Voilà, de cette manière, on évite d’avoir une installation globale de gulp (et\ndonc d’avoir à la maintenir à jour), et on a l’avantage de ne pas avoir à se\nsoucier de la version de gulp utilisée pour chacun des projets. Ceci est bien\nentendu (théoriquement) valable pour toutes les dépendances globales."]},"\n",{"t":"p","c":["Il est aussi interressant de voir qu'avec ce systèmes de scripts npm, l'interêt\ndes outils comme Gulp ou Grunt (pour ne citer qu'eux) devient limité. Des\narticles traitent très bien de ces sujets. Vous pouvez par exemple aller voir\n",{"t":"a","p":{"href":"http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/"},"c":["celui-ci"]}," de\nKeith Cirkel. Chacun se fera son propre avis !"]}]}}}}</script><script src="/phenomic/phenomic.main.c0080dbe.js" async=""></script></body></html>