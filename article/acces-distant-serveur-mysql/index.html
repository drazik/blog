<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/phenomic/phenomic.main.4c397c62.css"/></head><body><div id="PhenomicRoot"><div data-reactroot=""><header class="header"><div class="content-wrap"><div class="logo"><h1><a href="/">Jesmo Drazik Blog</a></h1><p class="description">Développeur front-end @ Cozy Cloud</p><div class="find-me"><a href="https://twitter.com/JesmoDrazik">Twitter</a><a href="https://github.com/drazik">GitHub</a></div></div></div></header><div id="content"><div class="content-wrap"><div><article class="article"><h1 style="text-align:center">J&#x27;ai eu besoin d&#x27;un accès distant à mon serveur MySQL</h1><p><strong>Attention, cet article a été publié il y a plus d&#x27;un an. Son contenu ne doit plus être prit pour argent comptant. Vous devriez recouper les informations qu&#x27;il contient avec d&#x27;autres sources, afin de vous assurer que celles-ci sont toujours d&#x27;actualité.</strong></p><div><p>Pour un projet universitaire (une plateforme collaborative de développement R),
j’ai eu besoin d’une base de données. J’ai pas cherché midi à quatorze heures,
j’ai choisi MySQL. Mais quelle fût ma surprise lorsque j&#x27;ai constaté que je ne
pouvais pas m&#x27;y connecter à partir de ma machine mais uniquement à partir de
celle sur laquelle MySQL tournait.</p>
<p><span class="more"></span></p>
<p>Bon d&#x27;abord, on va commencer par installer MySQL :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>apt-get mysql-server</span></span></div></pre>
<p>Il nous demande le mot de passe root. Nous voilà avec un MySQL et un
utilisateur root.</p>
<p>Maintenant j’aimerais utiliser HeidiSQL pour gérer mes bases. Allez soyons
fous, on entre l’ip de notre serveur, root et notre mot de passe dans HeidiSQL.
Et là… Oh la grosse erreur ! Eh ouais, MySQL n’autorise que les connexions
locales par défaut. Et ne donne des droits aux utilisateur que s’ils se
connectent en local. Bon, on va changer tout ça.</p>
<p>On va d’abord donner tous les droits sur toutes les bases à notre utilisateur
root (en vrai il faudrait ne surtout pas toucher à root, mais plutôt créer un
autre utilisateur à qui on restreint les droits, etc… J’ai la flemme, on verra
plus tard) :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--sql"><span class="syntax--keyword syntax--other syntax--authorization syntax--sql"><span>GRANT</span></span><span> ALL PRIVILEGES </span><span class="syntax--keyword syntax--other syntax--DDL syntax--create syntax--II syntax--sql"><span>ON</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--star syntax--sql"><span>*</span></span><span>.</span><span class="syntax--keyword syntax--operator syntax--star syntax--sql"><span>*</span></span><span> TO ‘root’@’%’ IDENTIFIED BY ‘UnMDPSuperSecret’;</span></span></div></pre>
<p>EDIT : un <a href="http://blog.emmanuelgautier.fr/utilisateurs-et-privileges-sous-mysql.html">très bon
article</a>
d&#x27;Emmanuel Gautier explique comment gérer les droits sous MySQL. Je vous invite
à y jetter un oeil pour gérer les droits proprement sur votre serveur.</p>
<p>Explications. <code>GRANT ALL PRIVILEGES</code>, ça veut dire ce que ça veut dire. <code>ON *.*</code>, ça veut dire sur toutes les bases et toutes les tables qui composent ces
bases. <code>TO &#x27;root&#x27;@&#x27;%&#x27;</code>, ça veut dire à l’utilisateur root peu importe l’IP avec
laquelle il se connecte. Et <code>IDENTIFIED BY &#x27;...&#x27;</code>, c’est le mot de passe de
root.</p>
<p>Pour que MySQL prenne ceci en compte, il faut “flusher” les privileges :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--source syntax--sql"><span>FLUSH PRIVILEGES;</span></span></div></pre>
<p>Une fois ceci fait, on va dire à MySQL de ne plus écouter les connexions
uniquement sur 127.0.0.1 :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>vi /etc/mysql/my.cnf</span></span></div></pre>
<p>On commente la ligne <code>bind-address = 127.0.0.1</code>.</p>
<p>Et on redémarre MySQL :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>/etc/init.d/mysql restart</span></span></div></pre>
<p>Et voilà, comme dirait l’autre.</p></div><footer style="text-align:center"><a href="https://github.com/drazik/blog/edit/master/content/posts/acces-distant-serveur-mysql/index.md" target="_blank">Proposer des modifications</a></footer></article><div><a href="/">Revenir à l&#x27;accueil</a></div></div></div></div><footer><div class="content-wrap"><section class="copy"><p>© <!-- -->2018<!-- --> Cyrille Jesmo Drazik</p></section></div></footer></div></div><script id="PhenomicHydration" type="text/json">{"path=content%2Fposts&id=acces-distant-serveur-mysql":{"status":"idle","node":{"filename":"index.md","title":"J'ai eu besoin d'un accès distant à mon serveur MySQL","date":"2014-03-16","timeSensitive":true,"body":{"t":"div","c":[{"t":"p","c":["Pour un projet universitaire (une plateforme collaborative de développement R),\nj’ai eu besoin d’une base de données. J’ai pas cherché midi à quatorze heures,\nj’ai choisi MySQL. Mais quelle fût ma surprise lorsque j'ai constaté que je ne\npouvais pas m'y connecter à partir de ma machine mais uniquement à partir de\ncelle sur laquelle MySQL tournait."]},"\n",{"t":"p","c":[{"t":"span","p":{"className":"more"}}]},"\n",{"t":"p","c":["Bon d'abord, on va commencer par installer MySQL :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["apt-get mysql-server"]}]}]}]},"\n",{"t":"p","c":["Il nous demande le mot de passe root. Nous voilà avec un MySQL et un\nutilisateur root."]},"\n",{"t":"p","c":["Maintenant j’aimerais utiliser HeidiSQL pour gérer mes bases. Allez soyons\nfous, on entre l’ip de notre serveur, root et notre mot de passe dans HeidiSQL.\nEt là… Oh la grosse erreur ! Eh ouais, MySQL n’autorise que les connexions\nlocales par défaut. Et ne donne des droits aux utilisateur que s’ils se\nconnectent en local. Bon, on va changer tout ça."]},"\n",{"t":"p","c":["On va d’abord donner tous les droits sur toutes les bases à notre utilisateur\nroot (en vrai il faudrait ne surtout pas toucher à root, mais plutôt créer un\nautre utilisateur à qui on restreint les droits, etc… J’ai la flemme, on verra\nplus tard) :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--sql"},"c":[{"t":"span","p":{"className":"syntax--keyword syntax--other syntax--authorization syntax--sql"},"c":[{"t":"span","c":["GRANT"]}]},{"t":"span","c":[" ALL PRIVILEGES "]},{"t":"span","p":{"className":"syntax--keyword syntax--other syntax--DDL syntax--create syntax--II syntax--sql"},"c":[{"t":"span","c":["ON"]}]},{"t":"span","c":[" "]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--star syntax--sql"},"c":[{"t":"span","c":["*"]}]},{"t":"span","c":["."]},{"t":"span","p":{"className":"syntax--keyword syntax--operator syntax--star syntax--sql"},"c":[{"t":"span","c":["*"]}]},{"t":"span","c":[" TO ‘root’@’%’ IDENTIFIED BY ‘UnMDPSuperSecret’;"]}]}]}]},"\n",{"t":"p","c":["EDIT : un ",{"t":"a","p":{"href":"http://blog.emmanuelgautier.fr/utilisateurs-et-privileges-sous-mysql.html"},"c":["très bon\narticle"]},"\nd'Emmanuel Gautier explique comment gérer les droits sous MySQL. Je vous invite\nà y jetter un oeil pour gérer les droits proprement sur votre serveur."]},"\n",{"t":"p","c":["Explications. ",{"t":"code","c":["GRANT ALL PRIVILEGES"]},", ça veut dire ce que ça veut dire. ",{"t":"code","c":["ON *.*"]},", ça veut dire sur toutes les bases et toutes les tables qui composent ces\nbases. ",{"t":"code","c":["TO 'root'@'%'"]},", ça veut dire à l’utilisateur root peu importe l’IP avec\nlaquelle il se connecte. Et ",{"t":"code","c":["IDENTIFIED BY '...'"]},", c’est le mot de passe de\nroot."]},"\n",{"t":"p","c":["Pour que MySQL prenne ceci en compte, il faut “flusher” les privileges :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--source syntax--sql"},"c":[{"t":"span","c":["FLUSH PRIVILEGES;"]}]}]}]},"\n",{"t":"p","c":["Une fois ceci fait, on va dire à MySQL de ne plus écouter les connexions\nuniquement sur 127.0.0.1 :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["vi /etc/mysql/my.cnf"]}]}]}]},"\n",{"t":"p","c":["On commente la ligne ",{"t":"code","c":["bind-address = 127.0.0.1"]},"."]},"\n",{"t":"p","c":["Et on redémarre MySQL :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--plain syntax--null-grammar"},"c":[{"t":"span","c":["/etc/init.d/mysql restart"]}]}]}]},"\n",{"t":"p","c":["Et voilà, comme dirait l’autre."]}]}}}}</script><script src="/phenomic/phenomic.main.37b7fcc1.js" async=""></script></body></html>