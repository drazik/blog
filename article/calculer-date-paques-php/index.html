<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/phenomic/phenomic.main.4c397c62.css"/></head><body><div id="PhenomicRoot"><div data-reactroot=""><header class="header"><div class="content-wrap"><div class="logo"><h1><a href="/">Jesmo Drazik Blog</a></h1><p class="description">Développeur front-end @ Cozy Cloud</p><div class="find-me"><a href="https://twitter.com/JesmoDrazik">Twitter</a><a href="https://github.com/drazik">GitHub</a></div></div></div></header><div id="content"><div class="content-wrap"><div><article class="article"><h1 style="text-align:center">J&#x27;ai eu besoin de connaître la date de pâques chaque année jusqu&#x27;à l&#x27;infini et au-delà</h1><p><strong>Attention, cet article a été publié il y a plus d&#x27;un an. Son contenu ne doit plus être prit pour argent comptant. Vous devriez recouper les informations qu&#x27;il contient avec d&#x27;autres sources, afin de vous assurer que celles-ci sont toujours d&#x27;actualité.</strong></p><div><p>Pour un projet de gestion de demandes de congés, j’ai eu besoin de connaître
les dates de chaque jour férié (sauf le lundi de Pentecôte puisqu’il est
maintenant ouvré).</p>
<p>Facile, certains sont fixes. D’autres sont fonction de Pâques, qui est lui même
variable. Ambiance.</p>
<p><span class="more"></span></p>
<p>Je me renseigne donc sur Pâques, et me retrouve rapidement sur <a href="http://fr.wikipedia.org/wiki/Calcul_de_la_date_de_P%C3%A2ques">ce genre de
page wikipedia</a>.</p>
<p>Puisque des algorithmes existent, je me dis que ça a bien du être implémenté,
que ce soit dans la SPL ou par n’importe qui d’autre. Après un petit coup de
google, me voici sur la documentation de <a href="http://php.net/manual/fr/function.easter-date.php">la fonction PHP
<code>easter_date()</code></a>.</p>
<p>Ça a l’air satisfaisant. Pourtant en lisant l’avertissement présent sur la
page, je me rend compte que ça ne va pas aller. Certes 2037 c’est loin, tout
aura changé d’ici là, mais pour le principe, je veux que ça marche tout le
temps.</p>
<p>Un peu plus bas sur la même page, une note nous dit que <code>easter_date()</code> ne se
base pas sur le fuseau horaire par défaut de PHP mais celui du système. Encore
un mauvais point. Cette fois par contre la doc propose une solution à ce
problème, et au précédent par la même occasion : utiliser <a href="http://www.php.net/manual/fr/function.easter-days.php">la fonction
<code>easter_days()</code></a>.</p>
<p>Puisqu’on sait que Pâques tombe entre le 21 mars et le 25 avril, alors il
suffit de prendre comme base le 21 mars et y ajouter le résultat de
<code>easter_days()</code> pour l’année voulue. C’est partit. On va faire une petite
méthode qui renvoie un tableau de DateTime représentant les jours fériés pour
l’année passée en paramètre.</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--html syntax--php"><span>/**</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> * @brief Retourne le tableau des jours fériés (DateTime)</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> * @param $year</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> * @return array</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> */</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>protected function getHolidays($year)</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>{</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $holidays = array();</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    // Fixed holidays</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $fixedDates = array(&#x27;01-01&#x27;, &#x27;05-01&#x27;, &#x27;05-08&#x27;, &#x27;07-14&#x27;, &#x27;08-15&#x27;, &#x27;11-01&#x27;, &#x27;11-11&#x27;, &#x27;12-25&#x27;);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    foreach ($fixedDates as $date)</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    {</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>        $holidays[] = new DateTime($year . &#x27;-&#x27; . $date);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    }</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    // Variables holidays, depending on easter</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easter = new DateTime($year . &#x27;-03-21&#x27;);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $nbDays = easter_days($year);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easter-&gt;add(new DateInterval(&#x27;P&#x27; . $nbDays . &#x27;D&#x27;));</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $holidays[] = clone $easter;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easterMonday = clone $easter;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easterMonday-&gt;add(new DateInterval(&#x27;P1D&#x27;));</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $holidays[] = $easterMonday;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easterThursday = clone $easter;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $easterThursday-&gt;add(new DateInterval(&#x27;P39D&#x27;));</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $holidays[] = $easterThursday;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    return $holidays;</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>}</span></span></div></pre>
<p>On peut maintenant faire une méthode qui prend en paramètre un DateTime et qui
nous dit si celui-ci est un jour férié ou non :</p>
<pre class="editor editor-colors"><div class="line"><span class="syntax--text syntax--html syntax--php"><span>/**</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> * @param DateTime $date</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> * @return bool</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> */</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>protected function isHoliday(\DateTime $date)</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>{</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $year = intval($date-&gt;format(&#x27;Y&#x27;));</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    $holidays = $this-&gt;getHolidays($year);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span> </span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>    return in_array($date, $holidays);</span></span></div><div class="line"><span class="syntax--text syntax--html syntax--php"><span>}</span></span></div></pre></div><footer style="text-align:center"><a href="https://github.com/drazik/blog/edit/master/content/posts/calculer-date-paques-php/index.md" target="_blank">Proposer des modifications</a></footer></article><div><a href="/">Revenir à l&#x27;accueil</a></div></div></div></div><footer><div class="content-wrap"><section class="copy"><p>© <!-- -->2018<!-- --> Cyrille Jesmo Drazik</p></section></div></footer></div></div><script id="PhenomicHydration" type="text/json">{"path=content%2Fposts&id=calculer-date-paques-php":{"status":"idle","node":{"filename":"index.md","title":"J'ai eu besoin de connaître la date de pâques chaque année jusqu'à l'infini et au-delà","date":"2014-04-01","timeSensitive":true,"body":{"t":"div","c":[{"t":"p","c":["Pour un projet de gestion de demandes de congés, j’ai eu besoin de connaître\nles dates de chaque jour férié (sauf le lundi de Pentecôte puisqu’il est\nmaintenant ouvré)."]},"\n",{"t":"p","c":["Facile, certains sont fixes. D’autres sont fonction de Pâques, qui est lui même\nvariable. Ambiance."]},"\n",{"t":"p","c":[{"t":"span","p":{"className":"more"}}]},"\n",{"t":"p","c":["Je me renseigne donc sur Pâques, et me retrouve rapidement sur ",{"t":"a","p":{"href":"http://fr.wikipedia.org/wiki/Calcul_de_la_date_de_P%C3%A2ques"},"c":["ce genre de\npage wikipedia"]},"."]},"\n",{"t":"p","c":["Puisque des algorithmes existent, je me dis que ça a bien du être implémenté,\nque ce soit dans la SPL ou par n’importe qui d’autre. Après un petit coup de\ngoogle, me voici sur la documentation de ",{"t":"a","p":{"href":"http://php.net/manual/fr/function.easter-date.php"},"c":["la fonction PHP\n",{"t":"code","c":["easter_date()"]}]},"."]},"\n",{"t":"p","c":["Ça a l’air satisfaisant. Pourtant en lisant l’avertissement présent sur la\npage, je me rend compte que ça ne va pas aller. Certes 2037 c’est loin, tout\naura changé d’ici là, mais pour le principe, je veux que ça marche tout le\ntemps."]},"\n",{"t":"p","c":["Un peu plus bas sur la même page, une note nous dit que ",{"t":"code","c":["easter_date()"]}," ne se\nbase pas sur le fuseau horaire par défaut de PHP mais celui du système. Encore\nun mauvais point. Cette fois par contre la doc propose une solution à ce\nproblème, et au précédent par la même occasion : utiliser ",{"t":"a","p":{"href":"http://www.php.net/manual/fr/function.easter-days.php"},"c":["la fonction\n",{"t":"code","c":["easter_days()"]}]},"."]},"\n",{"t":"p","c":["Puisqu’on sait que Pâques tombe entre le 21 mars et le 25 avril, alors il\nsuffit de prendre comme base le 21 mars et y ajouter le résultat de\n",{"t":"code","c":["easter_days()"]}," pour l’année voulue. C’est partit. On va faire une petite\nméthode qui renvoie un tableau de DateTime représentant les jours fériés pour\nl’année passée en paramètre."]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["/**"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" * @brief Retourne le tableau des jours fériés (DateTime)"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" * @param $year"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" * @return array"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" */"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["protected function getHolidays($year)"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["{"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $holidays = array();"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    // Fixed holidays"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $fixedDates = array('01-01', '05-01', '05-08', '07-14', '08-15', '11-01', '11-11', '12-25');"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    foreach ($fixedDates as $date)"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    {"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["        $holidays[] = new DateTime($year . '-' . $date);"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    }"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    // Variables holidays, depending on easter"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easter = new DateTime($year . '-03-21');"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $nbDays = easter_days($year);"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easter->add(new DateInterval('P' . $nbDays . 'D'));"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $holidays[] = clone $easter;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easterMonday = clone $easter;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easterMonday->add(new DateInterval('P1D'));"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $holidays[] = $easterMonday;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easterThursday = clone $easter;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $easterThursday->add(new DateInterval('P39D'));"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $holidays[] = $easterThursday;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    return $holidays;"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["}"]}]}]}]},"\n",{"t":"p","c":["On peut maintenant faire une méthode qui prend en paramètre un DateTime et qui\nnous dit si celui-ci est un jour férié ou non :"]},"\n",{"t":"pre","p":{"className":"editor editor-colors"},"c":[{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["/**"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" * @param DateTime $date"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" * @return bool"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" */"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["protected function isHoliday(\\DateTime $date)"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["{"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $year = intval($date->format('Y'));"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    $holidays = $this->getHolidays($year);"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":[" "]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["    return in_array($date, $holidays);"]}]}]},{"t":"div","p":{"className":"line"},"c":[{"t":"span","p":{"className":"syntax--text syntax--html syntax--php"},"c":[{"t":"span","c":["}"]}]}]}]}]}}}}</script><script src="/phenomic/phenomic.main.db857bd8.js" async=""></script></body></html>